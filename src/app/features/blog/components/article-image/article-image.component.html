<figure class="article-image">
  <div
    class="image-container"
    (click)="openLightbox()"
    [attr.aria-label]="'View image: ' + data.alt"
    role="button"
    tabindex="0"
    (keydown.enter)="openLightbox()"
  >
    <img
      [src]="data.src"
      [alt]="data.alt"
      [loading]="loading"
      [width]="data.width"
      [height]="data.height"
      class="article-image-img"
    />
    <div class="image-overlay">
      <mat-icon>zoom_in</mat-icon>
    </div>
  </div>
  <figcaption class="article-image-caption" *ngIf="data.caption || data.credit">
    <span class="caption-text" *ngIf="data.caption">{{ data.caption }}</span>
    <span class="caption-credit" *ngIf="data.credit">
      Credit:
      <a
        *ngIf="data.creditUrl; else plainCredit"
        [href]="data.creditUrl"
        target="_blank"
        rel="noopener noreferrer"
      >
        {{ data.credit }}
      </a>
      <ng-template #plainCredit>{{ data.credit }}</ng-template>
    </span>
  </figcaption>
</figure>

<!-- Lightbox -->
<div
  *ngIf="lightboxOpen"
  class="lightbox"
  (click)="onBackdropClick($event)"
  (keydown)="onKeyDown($event)"
  tabindex="0"
  role="dialog"
  aria-modal="true"
>
  <button
    mat-icon-button
    class="lightbox-close"
    (click)="closeLightbox()"
    aria-label="Close lightbox"
  >
    <mat-icon>close</mat-icon>
  </button>

  <div class="lightbox-content">
    <img
      [src]="data.src"
      [alt]="data.alt"
      class="lightbox-image"
    />
    <div class="lightbox-caption" *ngIf="data.caption">
      {{ data.caption }}
    </div>
  </div>
</div>
