<div class="contact-form-container">
  <div class="contact-form-wrapper">
    <!-- Form Section -->
    @if (!isSubmitted()) {
      <div class="form-section">
        <div class="form-header">
          <mat-icon class="form-icon">contact_mail</mat-icon>
          <h2 class="form-title">Get in Touch</h2>
          <p class="form-subtitle">Have a question or feedback? We'd love to hear from you!</p>
        </div>

        <form class="contact-form" (ngSubmit)="onSubmit()">
          <!-- Name Row -->
          <div class="form-row">
            <mat-form-field appearance="fill" class="form-field half-width">
              <mat-label>First Name</mat-label>
              <input
                matInput
                type="text"
                [(ngModel)]="firstName"
                name="firstName"
                placeholder="John"
              />
              <mat-icon matPrefix>person</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="fill" class="form-field half-width">
              <mat-label>Last Name</mat-label>
              <input
                matInput
                type="text"
                [(ngModel)]="lastName"
                name="lastName"
                placeholder="Doe"
              />
              <mat-icon matPrefix>person</mat-icon>
            </mat-form-field>
          </div>

          <!-- Contact Row -->
          <div class="form-row">
            <mat-form-field appearance="fill" class="form-field half-width">
              <mat-label>Email *</mat-label>
              <input
                matInput
                type="email"
                [(ngModel)]="email"
                name="email"
                placeholder="john@example.com"
                required
              />
              <mat-icon matPrefix>email</mat-icon>
              @if (email() && !isEmailValid()) {
                <mat-error>Please enter a valid email address</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="fill" class="form-field half-width">
              <mat-label>Phone</mat-label>
              <input
                matInput
                type="tel"
                [(ngModel)]="phone"
                name="phone"
                placeholder="(555) 123-4567"
              />
              <mat-icon matPrefix>phone</mat-icon>
            </mat-form-field>
          </div>

          <!-- Message -->
          <mat-form-field appearance="fill" class="form-field full-width">
            <mat-label>Message</mat-label>
            <textarea
              matInput
              [(ngModel)]="message"
              name="message"
              rows="6"
              placeholder="Tell us what's on your mind..."
            ></textarea>
            <mat-icon matPrefix>message</mat-icon>
          </mat-form-field>

          <!-- reCAPTCHA -->
          <div class="recaptcha-wrapper">
            <div id="recaptcha-container"></div>
          </div>

          <!-- Submit Button -->
          <button
            mat-raised-button
            type="submit"
            class="submit-btn"
            [disabled]="isButtonDisabled()"
          >
            @if (isLoading()) {
              <ng-container>
                <mat-icon class="spinner">sync</mat-icon>
                <span>Sending...</span>
              </ng-container>
            } @else {
              <ng-container>
                <mat-icon>send</mat-icon>
                <span>Send Message</span>
              </ng-container>
            }
          </button>

          <p class="required-note">* Required field</p>
        </form>
      </div>
    }

    <!-- Thank You Section -->
    @if (isSubmitted()) {
      <div class="thank-you-section">
        <div class="thank-you-content">
          <div class="success-icon-wrapper">
            <mat-icon class="success-icon">check_circle</mat-icon>
          </div>
          <h2 class="thank-you-title">Message Sent!</h2>
          <p class="thank-you-message">
            Thank you for reaching out! We've received your message and will get back to you as soon as possible.
          </p>
          <div class="thank-you-footer">
            <mat-icon class="footer-icon">email</mat-icon>
            <p class="footer-text">Check your email for a confirmation.</p>
          </div>
        </div>
      </div>
    }
  </div>
</div>
