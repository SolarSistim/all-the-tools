<div class="percentage-calculator-page">
  <div class="container">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-icon-wrapper">
          <mat-icon class="hero-icon">percent</mat-icon>
        </div>
        <h1 class="hero-title">{{ getPageTitle() }}</h1>
        <p class="hero-subtitle">
          {{ getPageDescription() }}
        </p>
        <div class="hero-cta">
          <button
            mat-raised-button
            color="primary"
            (click)="scrollToCalculators()"
            class="cta-button"
          >
            <mat-icon>auto_awesome</mat-icon>
            Calculate Now
          </button>
        </div>
      </div>
      <div class="hero-visual">
        <div class="calculation-showcase">
          <div class="calc-example calc-example-1">
            <span class="calc-label">Discount</span>
            <code>20% off $100 = <span class="highlight">$80</span></code>
          </div>
          <div class="calc-example calc-example-2">
            <span class="calc-label">Tip Amount</span>
            <code>15% of $50 = <span class="highlight">$7.50</span></code>
          </div>
          <div class="calc-example calc-example-3">
            <span class="calc-label">Growth</span>
            <code>$100 â†’ $125 = <span class="highlight">+25%</span></code>
          </div>
        </div>
      </div>
    </section>

    <!-- Related Blog Posts -->
    <app-related-blog-posts [posts]="relatedBlogPosts"></app-related-blog-posts>

    <!-- The Bottom Line Section -->
    <section class="bottom-line-section">
      <h2 class="bottom-line-title">
        <mat-icon>summarize</mat-icon>
        The Bottom Line
      </h2>
      <p class="bottom-line-content">
        @if (calculatorType() === 'base') {
          This percentage calculator instantly computes two fundamental percentage operations with real-time precision. Calculate "what is X% of Y" to find percentage amounts (like 20% of $100 = $20), or calculate "what percent is Y of X" to find percentage ratios (like 25 is what percent of 100 = 25%). Perfect for shopping discounts, financial calculations, tip amounts, tax computations, grade percentages, business metrics, growth rates, and statistical analysis.
        } @else if (calculatorType() === 'percentage-increase-decrease') {
          Calculate percentage increase or decrease between two values instantly. Essential for measuring growth rates, price changes, stock performance, salary increases, business metrics, and comparing values over time. Shows whether the change is an increase or decrease with the exact percentage.
        } @else if (calculatorType() === 'discount-calculator') {
          Calculate final prices after discounts instantly. Perfect for shopping, comparing deals, calculating sale prices, and determining savings. Enter the original price and discount percentage to see the discount amount and final price you'll pay.
        } @else if (calculatorType() === 'tax-calculator') {
          Calculate sales tax amounts and total prices instantly. Essential for budgeting purchases, understanding final costs, and financial planning. Enter any base amount and tax rate to see the tax amount and total with tax included.
        } @else if (calculatorType() === 'profit-margin') {
          Calculate profit margin percentage from revenue and cost. Critical for business pricing, profitability analysis, and financial planning. Shows both the profit amount and margin percentage to understand your business performance.
        } @else if (calculatorType() === 'markup-calculator') {
          Calculate selling price from cost and markup percentage. Essential for product pricing, retail business, and service pricing. Shows the markup amount and final selling price to ensure profitable pricing strategies.
        }
      </p>
    </section>

    <!-- AdSense Ad -->
    <app-adsense></app-adsense>

    <!-- Calculator Grid -->
    <div class="calculator-grid">
      <!-- BASE CALCULATORS -->
      @if (calculatorType() === 'base') {
        <!-- Calculator 1: X% of Y -->
        <mat-card class="calculator-card">
          <div class="card-header">
            <mat-icon class="card-icon">calculate</mat-icon>
            <h2>What is X% of Y?</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Percentage (%)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="percentage1"
                  (ngModelChange)="calculatePercentageOf()"
                  placeholder="e.g., 20"
                />
                <mat-icon matSuffix>percent</mat-icon>
              </mat-form-field>

              <span class="operator">of</span>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Number</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="number1"
                  (ngModelChange)="calculatePercentageOf()"
                  placeholder="e.g., 100"
                />
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-label">Result</div>
              <div class="result-value">
                @if (result1() !== null) {
                  <span class="value">{{ result1() | number:'1.0-2' }}</span>
                } @else {
                  <span class="placeholder">Enter values above</span>
                }
              </div>
              @if (result1() !== null && percentage1() !== null && number1() !== null) {
                <div class="result-explanation">
                  {{ percentage1() }}% of {{ number1() }} = {{ result1() | number:'1.0-2' }}
                </div>
              }
            </div>
          </div>
        </mat-card>

        <!-- Calculator 2: What percent is Y of X -->
        <mat-card class="calculator-card">
          <div class="card-header">
            <mat-icon class="card-icon">functions</mat-icon>
            <h2>What percent is Y of X?</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Part (Y)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="part"
                  (ngModelChange)="calculateWhatPercent()"
                  placeholder="e.g., 25"
                />
              </mat-form-field>

              <span class="operator">of</span>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Whole (X)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="whole"
                  (ngModelChange)="calculateWhatPercent()"
                  placeholder="e.g., 100"
                />
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-label">Result</div>
              <div class="result-value">
                @if (result2() !== null) {
                  <span class="value">{{ result2() | number:'1.0-2' }}%</span>
                } @else {
                  <span class="placeholder">Enter values above</span>
                }
              </div>
              @if (result2() !== null && part() !== null && whole() !== null) {
                <div class="result-explanation">
                  {{ part() }} is {{ result2() | number:'1.0-2' }}% of {{ whole() }}
                </div>
              }
            </div>
          </div>
        </mat-card>
      }

      <!-- PERCENTAGE INCREASE/DECREASE -->
      @if (calculatorType() === 'percentage-increase-decrease') {
        <mat-card class="calculator-card single-calculator">
          <div class="card-header">
            <mat-icon class="card-icon">trending_up</mat-icon>
            <h2>Percentage Increase/Decrease</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Old Value</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="oldValue"
                  (ngModelChange)="calculatePercentChange()"
                  placeholder="e.g., 100"
                />
              </mat-form-field>

              <mat-icon class="arrow-icon">arrow_forward</mat-icon>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>New Value</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="newValue"
                  (ngModelChange)="calculatePercentChange()"
                  placeholder="e.g., 125"
                />
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-label">Percentage Change</div>
              <div class="result-value">
                @if (percentChange() !== null) {
                  <span class="value" [class.positive]="isIncrease()" [class.negative]="isDecrease()">
                    {{ percentChange() | number:'1.0-2' }}%
                  </span>
                } @else {
                  <span class="placeholder">Enter values above</span>
                }
              </div>
              @if (percentChange() !== null && oldValue() !== null && newValue() !== null) {
                <div class="result-explanation">
                  @if (isIncrease()) {
                    <mat-icon class="change-icon increase">trending_up</mat-icon>
                    Increase of {{ percentChange() | number:'1.0-2' }}%
                  } @else if (isDecrease()) {
                    <mat-icon class="change-icon decrease">trending_down</mat-icon>
                    Decrease of {{ Math.abs(percentChange()!) | number:'1.0-2' }}%
                  } @else {
                    No change (0%)
                  }
                </div>
              }
            </div>
          </div>
        </mat-card>
      }

      <!-- DISCOUNT CALCULATOR -->
      @if (calculatorType() === 'discount-calculator') {
        <mat-card class="calculator-card single-calculator">
          <div class="card-header">
            <mat-icon class="card-icon">local_offer</mat-icon>
            <h2>Discount Calculator</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Original Price</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="originalPrice"
                  (ngModelChange)="calculateDiscount()"
                  placeholder="e.g., 100"
                />
                <span matPrefix>$&nbsp;</span>
              </mat-form-field>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Discount (%)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="discountPercent"
                  (ngModelChange)="calculateDiscount()"
                  placeholder="e.g., 20"
                />
                <mat-icon matSuffix>percent</mat-icon>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-row">
                <div class="result-label">Discount Amount</div>
                <div class="result-value">
                  @if (discountAmount() !== null) {
                    <span class="value savings">-${{ discountAmount() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">-</span>
                  }
                </div>
              </div>

              <div class="result-row final">
                <div class="result-label">Final Price</div>
                <div class="result-value">
                  @if (finalPrice() !== null) {
                    <span class="value">${{ finalPrice() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">Enter values above</span>
                  }
                </div>
              </div>

              @if (finalPrice() !== null && originalPrice() !== null && discountPercent() !== null) {
                <div class="result-explanation">
                  You save ${{ discountAmount() | number:'1.0-2' }} ({{ discountPercent() }}% off)
                </div>
              }
            </div>
          </div>
        </mat-card>
      }

      <!-- TAX CALCULATOR -->
      @if (calculatorType() === 'tax-calculator') {
        <mat-card class="calculator-card single-calculator">
          <div class="card-header">
            <mat-icon class="card-icon">receipt</mat-icon>
            <h2>Sales Tax Calculator</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Base Amount</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="baseAmount"
                  (ngModelChange)="calculateTax()"
                  placeholder="e.g., 100"
                />
                <span matPrefix>$&nbsp;</span>
              </mat-form-field>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Tax Rate (%)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="taxRate"
                  (ngModelChange)="calculateTax()"
                  placeholder="e.g., 8.5"
                />
                <mat-icon matSuffix>percent</mat-icon>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-row">
                <div class="result-label">Tax Amount</div>
                <div class="result-value">
                  @if (taxAmount() !== null) {
                    <span class="value">+${{ taxAmount() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">-</span>
                  }
                </div>
              </div>

              <div class="result-row final">
                <div class="result-label">Total with Tax</div>
                <div class="result-value">
                  @if (totalWithTax() !== null) {
                    <span class="value">${{ totalWithTax() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">Enter values above</span>
                  }
                </div>
              </div>

              @if (totalWithTax() !== null && baseAmount() !== null && taxRate() !== null) {
                <div class="result-explanation">
                  ${{ baseAmount() | number:'1.0-2' }} + ${{ taxAmount() | number:'1.0-2' }} tax ({{ taxRate() }}%)
                </div>
              }
            </div>
          </div>
        </mat-card>
      }

      <!-- PROFIT MARGIN CALCULATOR -->
      @if (calculatorType() === 'profit-margin') {
        <mat-card class="calculator-card single-calculator">
          <div class="card-header">
            <mat-icon class="card-icon">attach_money</mat-icon>
            <h2>Profit Margin Calculator</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Revenue</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="revenue"
                  (ngModelChange)="calculateProfitMargin()"
                  placeholder="e.g., 150"
                />
                <span matPrefix>$&nbsp;</span>
              </mat-form-field>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Cost</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="cost"
                  (ngModelChange)="calculateProfitMargin()"
                  placeholder="e.g., 100"
                />
                <span matPrefix>$&nbsp;</span>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-row">
                <div class="result-label">Profit Amount</div>
                <div class="result-value">
                  @if (profitAmount() !== null) {
                    <span class="value">${{ profitAmount() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">-</span>
                  }
                </div>
              </div>

              <div class="result-row final">
                <div class="result-label">Profit Margin</div>
                <div class="result-value">
                  @if (profitMargin() !== null) {
                    <span class="value">{{ profitMargin() | number:'1.0-2' }}%</span>
                  } @else {
                    <span class="placeholder">Enter values above</span>
                  }
                </div>
              </div>

              @if (profitMargin() !== null && revenue() !== null && cost() !== null) {
                <div class="result-explanation">
                  Profit: ${{ profitAmount() | number:'1.0-2' }} from ${{ revenue() | number:'1.0-2' }} revenue
                </div>
              }
            </div>
          </div>
        </mat-card>
      }

      <!-- MARKUP CALCULATOR -->
      @if (calculatorType() === 'markup-calculator') {
        <mat-card class="calculator-card single-calculator">
          <div class="card-header">
            <mat-icon class="card-icon">trending_up</mat-icon>
            <h2>Markup Calculator</h2>
          </div>

          <div class="calculator-content">
            <div class="input-row">
              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Cost Price</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="costPrice"
                  (ngModelChange)="calculateMarkup()"
                  placeholder="e.g., 100"
                />
                <span matPrefix>$&nbsp;</span>
              </mat-form-field>

              <mat-form-field appearance="fill" class="input-field">
                <mat-label>Markup (%)</mat-label>
                <input
                  matInput
                  type="number"
                  [(ngModel)]="markupPercent"
                  (ngModelChange)="calculateMarkup()"
                  placeholder="e.g., 50"
                />
                <mat-icon matSuffix>percent</mat-icon>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="result-section">
              <div class="result-row">
                <div class="result-label">Markup Amount</div>
                <div class="result-value">
                  @if (markupAmount() !== null) {
                    <span class="value">+${{ markupAmount() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">-</span>
                  }
                </div>
              </div>

              <div class="result-row final">
                <div class="result-label">Selling Price</div>
                <div class="result-value">
                  @if (sellingPrice() !== null) {
                    <span class="value">${{ sellingPrice() | number:'1.0-2' }}</span>
                  } @else {
                    <span class="placeholder">Enter values above</span>
                  }
                </div>
              </div>

              @if (sellingPrice() !== null && costPrice() !== null && markupPercent() !== null) {
                <div class="result-explanation">
                  ${{ costPrice() | number:'1.0-2' }} cost + ${{ markupAmount() | number:'1.0-2' }} markup ({{ markupPercent() }}%)
                </div>
              }
            </div>
          </div>
        </mat-card>
      }
    </div>

    <!-- AdSense Ad -->
    <app-adsense></app-adsense>

    <!-- Usage Examples -->
    <div class="examples-section">
      <h3>
        <mat-icon>lightbulb</mat-icon>
        Common Uses
      </h3>
      <div class="examples-grid">
        <div class="example-card">
          <mat-icon>shopping_cart</mat-icon>
          <h4>Discounts</h4>
          <p>Calculate sale prices and savings on purchases</p>
        </div>
        <div class="example-card">
          <mat-icon>trending_up</mat-icon>
          <h4>Growth Rates</h4>
          <p>Measure percentage increase or decrease</p>
        </div>
        <div class="example-card">
          <mat-icon>restaurant</mat-icon>
          <h4>Tips & Taxes</h4>
          <p>Calculate tips and sales tax amounts</p>
        </div>
        <div class="example-card">
          <mat-icon>school</mat-icon>
          <h4>Grades</h4>
          <p>Convert test scores to percentages</p>
        </div>
      </div>
    </div>

    <!-- Related Blog Posts -->
    <app-related-blog-posts [posts]="relatedBlogPosts"></app-related-blog-posts>
  </div>
</div>

<app-cta-email-list></app-cta-email-list>
