<header class="header">
  <mat-toolbar class="toolbar">
    <div class="toolbar-content container">
      <!-- Hamburger Menu Button (Tools Browser) -->
      <button
        mat-icon-button
        (click)="toggleToolsSidenav()"
        class="hamburger-btn"
        aria-label="Open tools menu"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <!-- Logo / Brand -->
      <a routerLink="/" class="logo">
        <mat-icon class="logo-icon">construction</mat-icon>
        <span class="logo-text">ALL THE TOOLS</span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="desktop-nav hide-mobile">
        <a
          routerLink="/"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-link"
        >
          Home
        </a>

        <!-- Tools Dropdown -->
        <button
          mat-button
          [matMenuTriggerFor]="toolsMenu"
          class="nav-link tools-btn"
        >
          Tools
          <mat-icon>expand_more</mat-icon>
        </button>

        <!-- About Dropdown -->
        <button
          mat-button
          [matMenuTriggerFor]="aboutMenu"
          class="nav-link about-btn"
        >
          About
          <mat-icon>expand_more</mat-icon>
        </button>
      </nav>

      <!-- Actions (Desktop) -->
      <div class="actions hide-mobile">
        <!-- Theme Toggle -->
        <button
          mat-icon-button
          (click)="toggleTheme()"
          [matTooltip]="isDarkTheme() ? 'Switch to Light Mode' : 'Switch to Dark Mode'"
          class="theme-toggle"
          aria-label="Toggle theme"
        >
          <mat-icon>{{ isDarkTheme() ? 'light_mode' : 'dark_mode' }}</mat-icon>
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <div class="mobile-actions hide-desktop">
        <!-- Theme Toggle (Mobile) -->
        <button
          mat-icon-button
          (click)="toggleTheme()"
          class="theme-toggle"
          aria-label="Toggle theme"
        >
          <mat-icon>{{ isDarkTheme() ? 'light_mode' : 'dark_mode' }}</mat-icon>
        </button>
      </div>
    </div>
  </mat-toolbar>

  <!-- Tools Dropdown Menu (Desktop) -->
  <mat-menu #toolsMenu="matMenu" class="tools-menu">
    <div class="tools-menu-content">
      <!-- Quick Links to Featured Tools -->
      <div class="menu-section">
        <h4 class="menu-section-title">Featured Tools</h4>
        @for (tool of featuredTools; track tool.id) {
          <a
            mat-menu-item
            [routerLink]="['/tools', tool.route]"
            class="tool-menu-item"
          >
            <mat-icon>{{ tool.icon }}</mat-icon>
            <span>{{ tool.name }}</span>
          </a>
        }
      </div>

      <!-- Categories -->
      <div class="menu-section">
        <h4 class="menu-section-title">Browse by Category</h4>
        @for (category of categories; track category.id) {
          @if (getToolCount(category.id) > 0) {
            <a
              mat-menu-item
              [routerLink]="['/tools']"
              [queryParams]="{category: category.id}"
              class="category-menu-item"
            >
              <mat-icon>{{ category.icon }}</mat-icon>
              <div class="category-info">
                <span class="category-name">{{ category.name }}</span>
                <span class="category-count">{{ getToolCount(category.id) }} tools</span>
              </div>
            </a>
          }
        }
      </div>

      <!-- View All Link -->
      <div class="menu-section menu-footer">
        <a
          mat-menu-item
          routerLink="/tools"
          class="view-all-link"
        >
          <mat-icon>apps</mat-icon>
          <span>View All Tools</span>
        </a>
      </div>
    </div>
  </mat-menu>

  <!-- About Dropdown Menu (Desktop) -->
  <mat-menu #aboutMenu="matMenu" class="about-menu">
    <div class="about-menu-content">
      <!-- About Section Links -->
      <div class="menu-section">
        <a
          mat-menu-item
          routerLink="/about"
          class="about-menu-item"
        >
          <mat-icon>info</mat-icon>
          <span>About All The Tools</span>
        </a>

        <a
          mat-menu-item
          routerLink="/privacy"
          class="about-menu-item"
        >
          <mat-icon>privacy_tip</mat-icon>
          <span>Privacy Policy</span>
        </a>

        <a
          mat-menu-item
          routerLink="/terms"
          class="about-menu-item"
        >
          <mat-icon>description</mat-icon>
          <span>Terms of Service</span>
        </a>

        <a
          mat-menu-item
          routerLink="/accessibility"
          class="about-menu-item"
        >
          <mat-icon>accessibility</mat-icon>
          <span>Accessibility</span>
        </a>
      </div>
    </div>
  </mat-menu>

  <!-- Mobile Sidebar Menu -->
  @if (mobileMenuOpen()) {
    <div class="mobile-menu-overlay" (click)="closeMobileMenu()"></div>
    <div class="mobile-menu" [@slideIn]>
      <nav class="mobile-nav">
        <a
          routerLink="/"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: true}"
          (click)="closeMobileMenu()"
          class="mobile-nav-link"
        >
          <mat-icon>home</mat-icon>
          <span>Home</span>
        </a>

        <a
          routerLink="/tools"
          routerLinkActive="active"
          (click)="closeMobileMenu()"
          class="mobile-nav-link"
        >
          <mat-icon>apps</mat-icon>
          <span>All Tools</span>
        </a>

        <!-- Tool Categories -->
        <div class="mobile-categories">
          <p class="mobile-section-title">Categories</p>
          @for (category of categories; track category.id) {
            @if (getToolCount(category.id) > 0) {
              <a
                [routerLink]="['/tools']"
                [queryParams]="{category: category.id}"
                (click)="closeMobileMenu()"
                class="mobile-category-link"
              >
                <mat-icon>{{ category.icon }}</mat-icon>
                <span>{{ category.name }}</span>
                <span class="count">{{ getToolCount(category.id) }}</span>
              </a>
            }
          }
        </div>

        <!-- About & Legal Links -->
        <div class="mobile-categories">
          <p class="mobile-section-title">About & Legal</p>

          <a
            routerLink="/about"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            class="mobile-category-link"
          >
            <mat-icon>info</mat-icon>
            <span>About All The Tools</span>
          </a>

          <a
            routerLink="/privacy"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            class="mobile-category-link"
          >
            <mat-icon>privacy_tip</mat-icon>
            <span>Privacy Policy</span>
          </a>

          <a
            routerLink="/terms"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            class="mobile-category-link"
          >
            <mat-icon>description</mat-icon>
            <span>Terms of Service</span>
          </a>

          <a
            routerLink="/accessibility"
            routerLinkActive="active"
            (click)="closeMobileMenu()"
            class="mobile-category-link"
          >
            <mat-icon>accessibility</mat-icon>
            <span>Accessibility</span>
          </a>
        </div>
      </nav>
    </div>
  }
</header>
